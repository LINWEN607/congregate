# This is a shell of a script to run the docker fallback script across several container registry repositories

import subprocess

repos = []

# Add a .tpls file generated by Congregate
with open("./repo_images.tpls", "r") as f:
    for l in f.readlines():
        s = l.split(",")
        t0 = s[0].replace("('", "").replace("'", "")
        t1 = s[1].replace("')", "").replace(" '", "").strip("\n\r")
        repos.append((t0, t1))

for src, dest in repos:
    subprocess.Popen(
        ["manually_move_images_for_tpls.sh", src, dest], shell=True)
